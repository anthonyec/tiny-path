function returnImageSplit(t){for(var i=[],r=[],e=t.length-1;e>=0;e--)for(var n in drawFunctions)t[e]==n&&i.push(e);for(var a=i.length-1;a>=0;a--)r.push(t.slice(i[a],i[a-1]));return r}function callDrawFunctions(t){for(var i=t.length-1;i>=0;i--)for(var r in drawFunctions)r==t[i][0]&&(argArray=t[i].slice(1,t.length[i]),func=drawFunctions[r],window[func](argArray))}function drawLoop(args){for(var times=args[0],func=args[1].split("-")[1],params=args.splice(2,args.length),temp=params[1],number=temp.split("+"),offset=number[1].split("*")[0],tempArray=[],i=0;times>i;i++){for(var j=0;j<params.length;j++){var param=params[j],calc=eval(param);tempArray.push(calc)}drawSquare(tempArray),tempArray=[]}}function defineFill(t){var i=t[0];ctx.fillStyle=i}function defineStroke(t){var i=t[0],r=t[1];ctx.strokeStyle=i,ctx.lineWidth=r}function drawPath(t){var i,r,e=!0;ctx.beginPath();for(var n=t.length-1;n>=0;n--)e?r=t[n]:i=t[n],e||(n>t.length-3&&n<t.length-1?ctx.moveTo(i,r):ctx.lineTo(i,r)),e=!e;ctx.stroke(),ctx.fill()}function drawSquare(t){var i=t[0],r=t[1],e=t[2],n=t[3];ctx.beginPath(),ctx.rect(i,r,e,n),ctx.stroke(),ctx.fill()}function drawCircle(t){var i=t[0],r=t[1],e=t[2];ctx.beginPath(),ctx.arc(i,r,e,0,2*Math.PI),ctx.stroke(),ctx.fill()}function drawEllipse(t){var i=t[0],r=t[1],e=t[2],n=t[3],a=.5522848,o=e/2*a,s=n/2*a,c=i+e,l=r+n,h=i+e/2,u=r+n/2;ctx.beginPath(),ctx.moveTo(i,u),ctx.bezierCurveTo(i,u-s,h-o,r,h,r),ctx.bezierCurveTo(h+o,r,c,u-s,c,u),ctx.bezierCurveTo(c,u+s,h+o,l,h,l),ctx.bezierCurveTo(h-o,l,i,u+s,i,u),ctx.closePath(),ctx.stroke(),ctx.fill()}var image=["p",100,250,250,100,200,300,150,250,200,220,"p",280,250,380,400,400,300,250,250,400,220,"x",50,"-s","400+5*i","390+0","2","Math.sin(i/10)*100-100","#f","red","x",20,"-s","400+15*i","400+-i*10","10","10+i*10","#f","orange","#s","black",2,"s",400,50,50,50,"s",600,60,50,80,"#f","blue","#s","red",10,"e",50,50,100,100,"e",100,20,200,50,"c",100,20,10,"x",5,"-s","10+5*i","10+60*i","50","50"],drawFunctions={"#f":"defineFill","#s":"defineStroke",p:"drawPath",s:"drawSquare",c:"drawCircle",e:"drawEllipse",x:"drawLoop"},ctx=document.getElementById("tiny-path-canvas").getContext("2d");ctx.fillStyle="rgba(0, 0, 0, 0)",ctx.strokeStyle="rgba(0, 0, 0, 1)",callDrawFunctions(returnImageSplit(image));var GameObject=function(t,i){return this.x=Math.floor(800*Math.random()+1),this.y=Math.floor(450*Math.random()+1),this.width=t,this.height=i,this};GameObject.prototype={x:0,y:0,width:5,width:5,draw:function(){console.log(this.x)}};var TinyPath=function(t,i){this.ctx=t,this.arr=i,this.prefixes=":$",this.drawFunctions={},this.initialise=function(){var t=Object.getPrototypeOf(this);for(var i in t)this[i].init&&this[i].init(this)},this.draw=function(){this.renderScene(this.returnImageSplit())},this.initialise(),console.log(this.drawFunctions)};TinyPath.prototype.register=function(t,i){this.drawFunctions[t]=i},TinyPath.prototype.isPrefix=function(t){var i=this.prefixes;return-1!=i.indexOf(t)?!0:!1},TinyPath.prototype.isDrawFunction=function(t){var i=this.drawFunctions;for(var r in i)if(t==r)return!0;return!1},TinyPath.prototype.returnImageSplit=function(){for(var t=this.arr,i=(this.drawFunctions,[]),r=[],e=0;e<t.length;e++){var n,a=t[e];2==a.length&&"string"==typeof a&&(n=a.substring(0,1),this.isPrefix(n)&&i.push(e))}for(var o=0;o<i.length;o++)r.push(t.slice(i[o],i[o+1]));return r},TinyPath.prototype.callDrawFunction=function(t){var i=t[0],r=t.slice(1,t.length);if(this.isDrawFunction(i)){var e=this.drawFunctions[i];e.draw(r)}},TinyPath.prototype.renderScene=function(t){for(var i=t,r=0;r<i.length;r++){var e=i[r];this.callDrawFunction(e)}},TinyPath.prototype.drawPath={init:function(t){t.register(":p",this)},draw:function(t){console.log("Path: ",t)}},TinyPath.prototype.drawSquare={init:function(t){t.register(":s",this)},draw:function(t){console.log("Square: ",t)}},TinyPath.prototype.drawCircle={init:function(t){t.register(":c",this)},draw:function(t){console.log("Circle: ",t)}},TinyPath.prototype.drawEclipse={init:function(t){t.register(":e",this)},draw:function(t){console.log("Eclipse: ",t)}};var image=[":p",100,250,250,100,200,300,150,250,200,220,":p",280,250,380,400,400,300,250,250,400,220,":x",50,">s","400+5*i","390+0","2","Math.sin(i/10)*100-100","$f","red",":x",20,">s","400+15*i","400+-i*10","10","10+i*10","$f","orange","$s","black",2,":s",400,50,50,50,":s",600,60,50,80,"$f","blue","$s","red",10,":e",50,50,100,100,":e",100,20,200,50,":c",100,20,10,":x",5,">s","10+5*i","10+60*i","50","50"],canvas=document.getElementById("tiny-path-canvas").getContext("2d"),newImage=new TinyPath(canvas,image).draw();