var TinyPath=function(t,i){this.canvas=t,this.arr=i,this.scale=1,this.prefixes=":$",this.drawFunctions={},this.initialise=function(){var t=Object.getPrototypeOf(this);for(var i in t)this[i].init&&this[i].init(this)},this.draw=function(){this.canvas.fillStyle="rgba(255, 255, 255, 0)",this.canvas.strokeStyle="black",this.canvas.lineWidth=1*this.scale,this.renderScene(this.returnImageSplit())},this.initialise()};TinyPath.prototype.register=function(t,i){this.drawFunctions[t]=i},TinyPath.prototype.isPrefix=function(t){var i=this.prefixes;return-1!=i.indexOf(t)?!0:!1},TinyPath.prototype.isDrawFunction=function(t){var i=this.drawFunctions;for(var s in i)if(t==s)return!0;return!1},TinyPath.prototype.returnImageSplit=function(){for(var t=this.arr,i=(this.drawFunctions,[]),s=[],a=0;a<t.length;a++){var e,r=t[a];2==r.length&&"string"==typeof r&&(e=r.substring(0,1),this.isPrefix(e)&&i.push(a))}for(var c=0;c<i.length;c++)s.push(t.slice(i[c],i[c+1]));return s},TinyPath.prototype.callDrawFunction=function(t){var i=t[0],s=t.slice(1,t.length);if(this.isDrawFunction(i)){var a=this.drawFunctions[i];a.draw(s)}},TinyPath.prototype.renderScene=function(t){for(var i=t,s=0;s<i.length;s++){var a=i[s];this.callDrawFunction(a)}},TinyPath.prototype.drawPath={init:function(t){t.register(":p",this),this.ctx=t.canvas,this.scale=t.scale},draw:function(t){var i,s,a=!0;this.ctx.beginPath();for(var e=t.length-1;e>=0;e--)a?s=t[e]*this.scale:i=t[e]*this.scale,a||(e>t.length-3&&e<t.length-1?this.ctx.moveTo(i,s):this.ctx.lineTo(i,s)),a=!a;this.ctx.stroke(),this.ctx.fill()}},TinyPath.prototype.drawSquare={init:function(t){t.register(":s",this),this.ctx=t.canvas,this.scale=t.scale},draw:function(t){var i=t[0]*this.scale,s=t[1]*this.scale,a=t[2]*this.scale,e=t[3]*this.scale;this.ctx.beginPath(),this.ctx.rect(i,s,a,e),this.ctx.stroke(),this.ctx.fill()}},TinyPath.prototype.drawCircle={init:function(t){t.register(":c",this),this.ctx=t.canvas,this.scale=t.scale},draw:function(t){var i=t[0]*this.scale,s=t[1]*this.scale,a=t[2]*this.scale;this.ctx.beginPath(),this.ctx.arc(i,s,a,0,2*Math.PI),this.ctx.stroke(),this.ctx.fill()}},TinyPath.prototype.drawEclipse={init:function(t){t.register(":e",this),this.ctx=t.canvas,this.scale=t.scale},draw:function(t){var i=t[0]*this.scale,s=t[1]*this.scale,a=t[2]*this.scale,e=t[3]*this.scale,r=.5522848,c=a/2*r,n=e/2*r,h=i+a,o=s+e,l=i+a/2,u=s+e/2;this.ctx.beginPath(),this.ctx.moveTo(i,u),this.ctx.bezierCurveTo(i,u-n,l-c,s,l,s),this.ctx.bezierCurveTo(l+c,s,h,u-n,h,u),this.ctx.bezierCurveTo(h,u+n,l+c,o,l,o),this.ctx.bezierCurveTo(l-c,o,i,u+n,i,u),this.ctx.closePath(),this.ctx.stroke(),this.ctx.fill()}},TinyPath.prototype.defineFill={init:function(t){t.register("$f",this),this.ctx=t.canvas},draw:function(t){var i=t[0];this.ctx.fillStyle=i}},TinyPath.prototype.defineStroke={init:function(t){t.register("$s",this),this.ctx=t.canvas,this.scale=t.scale},draw:function(t){var i=t[0],s=t[1]*this.scale;this.ctx.strokeStyle=i,this.ctx.lineWidth=s}},TinyPath.prototype.drawLoop={init:function(t){t.register(":x",this),this.ctx=t.canvas,this.parent=t},draw:function(args){for(var times=args[0],func=args[1].split(">")[1],params=args.splice(2,args.length),tempArray=[],i=0;times>i;i++){tempArray.push(func);for(var j=0;j<params.length;j++){var param=params[j],calc=eval(param);tempArray.push(calc)}this.parent.callDrawFunction(tempArray),tempArray=[]}}},TinyPath.prototype.drawRoundedRect={init:function(t){t.register(":r",this),this.ctx=t.canvas,this.scale=t.scale},draw:function(t){var i=t[0]*this.scale,s=t[1]*this.scale,a=t[2]*this.scale,e=t[3]*this.scale,r=t[4]*this.scale;this.ctx.beginPath(),this.ctx.moveTo(i+r,s),this.ctx.lineTo(i+a-r,s),this.ctx.quadraticCurveTo(i+a,s,i+a,s+r),this.ctx.lineTo(i+a,s+e-r),this.ctx.quadraticCurveTo(i+a,s+e,i+a-r,s+e),this.ctx.lineTo(i+r,s+e),this.ctx.quadraticCurveTo(i,s+e,i,s+e-r),this.ctx.lineTo(i,s+r),this.ctx.quadraticCurveTo(i,s,i+r,s),this.ctx.closePath(),this.ctx.stroke(),this.ctx.fill()}};