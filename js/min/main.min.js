var TinyPath=function(t,i){this.canvas=t,this.arr=i,this.dpi=1,this.prefixes=":$",this.drawFunctions={},this.initialise=function(){var t=Object.getPrototypeOf(this);for(var i in t)this[i].init&&this[i].init(this)},this.draw=function(){this.canvas.fillStyle="rgba(255, 255, 255, 0)",this.canvas.strokeStyle="black",this.canvas.lineWidth=1*this.dpi,this.renderScene(this.returnImageSplit())},this.initialise()};TinyPath.prototype.register=function(t,i){this.drawFunctions[t]=i},TinyPath.prototype.isPrefix=function(t){var i=this.prefixes;return-1!=i.indexOf(t)?!0:!1},TinyPath.prototype.isDrawFunction=function(t){var i=this.drawFunctions;for(var s in i)if(t==s)return!0;return!1},TinyPath.prototype.returnImageSplit=function(){for(var t=this.arr,i=(this.drawFunctions,[]),s=[],r=0;r<t.length;r++){var n,h=t[r];2==h.length&&"string"==typeof h&&(n=h.substring(0,1),this.isPrefix(n)&&i.push(r))}for(var a=0;a<i.length;a++)s.push(t.slice(i[a],i[a+1]));return s},TinyPath.prototype.callDrawFunction=function(t){var i=t[0],s=t.slice(1,t.length);if(this.isDrawFunction(i)){var r=this.drawFunctions[i];r.draw(s)}},TinyPath.prototype.renderScene=function(t){for(var i=t,s=0;s<i.length;s++){var r=i[s];this.callDrawFunction(r)}},TinyPath.prototype.drawPath={init:function(t){t.register(":p",this),this.ctx=t.canvas,this.dpi=t.dpi},draw:function(t){var i,s,r=!0;this.ctx.beginPath();for(var n=t.length-1;n>=0;n--)r?s=t[n]*this.dpi:i=t[n]*this.dpi,r||(n>t.length-3&&n<t.length-1?this.ctx.moveTo(i,s):this.ctx.lineTo(i,s)),r=!r;this.ctx.stroke(),this.ctx.fill()}},TinyPath.prototype.drawSquare={init:function(t){t.register(":s",this),this.ctx=t.canvas,this.dpi=t.dpi},draw:function(t){var i=t[0]*this.dpi,s=t[1]*this.dpi,r=t[2]*this.dpi,n=t[3]*this.dpi;this.ctx.beginPath(),this.ctx.rect(i,s,r,n),this.ctx.stroke(),this.ctx.fill()}},TinyPath.prototype.drawCircle={init:function(t){t.register(":c",this),this.ctx=t.canvas,this.dpi=t.dpi},draw:function(t){var i=t[0]*this.dpi,s=t[1]*this.dpi,r=t[2]*this.dpi;this.ctx.beginPath(),this.ctx.arc(i,s,r,0,2*Math.PI),this.ctx.stroke(),this.ctx.fill()}},TinyPath.prototype.drawEclipse={init:function(t){t.register(":e",this),this.ctx=t.canvas,this.dpi=t.dpi},draw:function(t){var i=t[0]*this.dpi,s=t[1]*this.dpi,r=t[2]*this.dpi,n=t[3]*this.dpi,h=.5522848,a=r/2*h,e=n/2*h,c=i+r,o=s+n,p=i+r/2,d=s+n/2;this.ctx.beginPath(),this.ctx.moveTo(i,d),this.ctx.bezierCurveTo(i,d-e,p-a,s,p,s),this.ctx.bezierCurveTo(p+a,s,c,d-e,c,d),this.ctx.bezierCurveTo(c,d+e,p+a,o,p,o),this.ctx.bezierCurveTo(p-a,o,i,d+e,i,d),this.ctx.closePath(),this.ctx.stroke(),this.ctx.fill()}},TinyPath.prototype.defineFill={init:function(t){t.register("$f",this),this.ctx=t.canvas},draw:function(t){var i=t[0];this.ctx.fillStyle=i}},TinyPath.prototype.defineStroke={init:function(t){t.register("$s",this),this.ctx=t.canvas,this.dpi=t.dpi},draw:function(t){var i=t[0],s=t[1]*this.dpi;this.ctx.strokeStyle=i,this.ctx.lineWidth=s}},TinyPath.prototype.drawLoop={init:function(t){t.register(":x",this),this.ctx=t.canvas,this.parent=t},draw:function(args){for(var times=args[0],func=args[1].split(">")[1],params=args.splice(2,args.length),tempArray=[],i=0;times>i;i++){tempArray.push(func);for(var j=0;j<params.length;j++){var param=params[j],calc=eval(param);tempArray.push(calc)}this.parent.callDrawFunction(tempArray),tempArray=[]}}},TinyPath.prototype.drawRoundedRect={init:function(t){t.register(":r",this),this.ctx=t.canvas,this.dpi=t.dpi},draw:function(t){var i=t[0]*this.dpi,s=t[1]*this.dpi,r=t[2]*this.dpi,n=t[3]*this.dpi,h=t[4]*this.dpi;this.ctx.beginPath(),this.ctx.moveTo(i+h,s),this.ctx.lineTo(i+r-h,s),this.ctx.quadraticCurveTo(i+r,s,i+r,s+h),this.ctx.lineTo(i+r,s+n-h),this.ctx.quadraticCurveTo(i+r,s+n,i+r-h,s+n),this.ctx.lineTo(i+h,s+n),this.ctx.quadraticCurveTo(i,s+n,i,s+n-h),this.ctx.lineTo(i,s+h),this.ctx.quadraticCurveTo(i,s,i+h,s),this.ctx.closePath(),this.ctx.stroke(),this.ctx.fill()}};