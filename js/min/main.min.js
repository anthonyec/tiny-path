var TinyPath=function(t,i){this.canvas=t,this.arr=i,this.prefixes=":$",this.drawFunctions={},this.initialise=function(){var t=Object.getPrototypeOf(this);for(var i in t)this[i].init&&this[i].init(this)},this.draw=function(){this.canvas.fillStyle="rgba(255, 255, 255, 0)",this.canvas.strokeStyle="black",this.canvas.lineWidth=1,this.renderScene(this.returnImageSplit())},this.initialise()};TinyPath.prototype.register=function(t,i){this.drawFunctions[t]=i},TinyPath.prototype.isPrefix=function(t){var i=this.prefixes;return-1!=i.indexOf(t)?!0:!1},TinyPath.prototype.isDrawFunction=function(t){var i=this.drawFunctions;for(var r in i)if(t==r)return!0;return!1},TinyPath.prototype.returnImageSplit=function(){for(var t=this.arr,i=(this.drawFunctions,[]),r=[],n=0;n<t.length;n++){var s,a=t[n];2==a.length&&"string"==typeof a&&(s=a.substring(0,1),this.isPrefix(s)&&i.push(n))}for(var e=0;e<i.length;e++)r.push(t.slice(i[e],i[e+1]));return r},TinyPath.prototype.callDrawFunction=function(t){var i=t[0],r=t.slice(1,t.length);if(this.isDrawFunction(i)){var n=this.drawFunctions[i];n.draw(r)}},TinyPath.prototype.renderScene=function(t){for(var i=t,r=0;r<i.length;r++){var n=i[r];this.callDrawFunction(n)}},TinyPath.prototype.drawPath={init:function(t){t.register(":p",this),this.ctx=t.canvas},draw:function(t){var i,r,n=!0;this.ctx.beginPath();for(var s=t.length-1;s>=0;s--)n?r=t[s]:i=t[s],n||(s>t.length-3&&s<t.length-1?this.ctx.moveTo(i,r):this.ctx.lineTo(i,r)),n=!n;this.ctx.stroke(),this.ctx.fill()}},TinyPath.prototype.drawSquare={init:function(t){t.register(":s",this),this.ctx=t.canvas},draw:function(t){var i=t[0],r=t[1],n=t[2],s=t[3];this.ctx.beginPath(),this.ctx.rect(i,r,n,s),this.ctx.stroke(),this.ctx.fill()}},TinyPath.prototype.drawCircle={init:function(t){t.register(":c",this),this.ctx=t.canvas},draw:function(t){var i=t[0],r=t[1],n=t[2];this.ctx.beginPath(),this.ctx.arc(i,r,n,0,2*Math.PI),this.ctx.stroke(),this.ctx.fill()}},TinyPath.prototype.drawEclipse={init:function(t){t.register(":e",this),this.ctx=t.canvas},draw:function(t){var i=t[0],r=t[1],n=t[2],s=t[3],a=.5522848,e=n/2*a,h=s/2*a,c=i+n,o=r+s,p=i+n/2,l=r+s/2;this.ctx.beginPath(),this.ctx.moveTo(i,l),this.ctx.bezierCurveTo(i,l-h,p-e,r,p,r),this.ctx.bezierCurveTo(p+e,r,c,l-h,c,l),this.ctx.bezierCurveTo(c,l+h,p+e,o,p,o),this.ctx.bezierCurveTo(p-e,o,i,l+h,i,l),this.ctx.closePath(),this.ctx.stroke(),this.ctx.fill()}},TinyPath.prototype.defineFill={init:function(t){t.register("$f",this),this.ctx=t.canvas},draw:function(t){var i=t[0];this.ctx.fillStyle=i}},TinyPath.prototype.defineStroke={init:function(t){t.register("$s",this),this.ctx=t.canvas},draw:function(t){var i=t[0],r=t[1];this.ctx.strokeStyle=i,this.ctx.lineWidth=r}},TinyPath.prototype.drawLoop={init:function(t){t.register(":x",this),this.ctx=t.canvas,this.parent=t},draw:function(args){for(var times=args[0],func=args[1].split(">")[1],params=args.splice(2,args.length),tempArray=[],i=0;times>i;i++){tempArray.push(func);for(var j=0;j<params.length;j++){var param=params[j],calc=eval(param);tempArray.push(calc)}this.parent.callDrawFunction(tempArray),tempArray=[]}}};